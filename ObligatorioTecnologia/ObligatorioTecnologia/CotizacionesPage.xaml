<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             BackgroundColor="#A2CADF"
             x:Class="ObligatorioTecnologia.CotizacionesPage"
              Title="Cotización UYU">

    <ContentPage.Resources>
        <Style TargetType="Frame">
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="HasShadow" Value="True"/>
            <Setter Property="Margin" Value="0,8"/>
        </Style>
        <Style TargetType="Label">
            <Setter Property="FontSize" Value="16"/>
        </Style>
        <Style TargetType="Label" x:Key="Titulo">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontAttributes" Value="Bold"/>
        </Style>
        <Style TargetType="Label" x:Key="Valor">
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontAttributes" Value="Bold"/>
        </Style>
    </ContentPage.Resources>

    <RefreshView IsRefreshing="{Binding IsBusy}" Command="{Binding RefrescarCommand}">
        <ScrollView>
            <VerticalStackLayout Padding="22" Spacing="22">

                <ActivityIndicator IsRunning="{Binding IsBusy}" IsVisible="{Binding IsBusy}" />

                <Label Text="{Binding Error}" TextColor="Red" IsVisible="{Binding Error, Converter={StaticResource NullToBoolConverter}}" />

                <Frame>
                    <VerticalStackLayout>
                        <Label Text="Dólar (USD → UYU)" Style="{StaticResource Titulo}" />
                        <Label Text="{Binding UyuPorUsd, StringFormat='${0:N2}'}" Style="{StaticResource Valor}" />
                        <Label Text="Pesos por 1 dólar" />
                    </VerticalStackLayout>
                </Frame>

                <Frame>
                    <VerticalStackLayout>
                        <Label Text="Euro (EUR → UYU)" Style="{StaticResource Titulo}" />
                        <Label Text="{Binding UyuPorEur, StringFormat='${0:N2}'}" Style="{StaticResource Valor}" />
                        <Label Text="Pesos por 1 euro" />
                    </VerticalStackLayout>
                </Frame>

                <Frame>
                    <VerticalStackLayout>
                        <Label Text="Real (BRL → UYU)" Style="{StaticResource Titulo}" />
                        <Label Text="{Binding UyuPorBrl, StringFormat='${0:N2}'}" Style="{StaticResource Valor}" />
                        <Label Text="Pesos por 1 real" />
                    </VerticalStackLayout>
                </Frame>

                <Label HorizontalOptions="Center"
                       TextColor="Black"
                       Text="{Binding UltimaActualizacion, StringFormat='Última actualización: {0:dd/MM/yyyy HH:mm}'}"
                       Opacity="0.7"/>

                <Button Text="Actualizar" Command="{Binding CargarCommand}" IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}"/>

            </VerticalStackLayout>
        </ScrollView>
    </RefreshView>
</ContentPage>